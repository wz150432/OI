# 堆

堆是一种完全二叉树，完全二叉树的根节点是堆中的极值，它能够在 $\Theta(logN)$ 的时间复杂度插入或者删除一个元素。下文的代码以大根堆为例

对于下标为 $i$ 的节点：

- 左子节点索引：$2i$

- 右子节点索引：$2i + 1$

- 父节点索引：$\lfloor i/2 \rfloor$

    

## down 函数

当一个节点不满足堆的性质我们向下沉

```cpp
void down(int u) {
    int t = u;
    if (2 * u <= s && a[2 * u] > a[t]) t = 2 * u;
    if (2 * u + 1 <= s && a[2 * u + 1] > a[t]) t = 2 * u + 1;
    if (t != u) {
        swap(a[u], a[t]);
        down(t);
    }
}
```



## up 函数

当一个节点满足堆的性质我们向上走

```cpp
void up(int u) {
    while (u > 1 && a[u / 2] < a[u]) {
        swap(a[u / 2], a[u]);
        u /= 2;
    }
}
```
