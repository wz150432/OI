# 归并排序

归并排序是一种基于分治的排序算法，我们将区间分成左右两段，先对他们排序，然后借助一个临时数字合并两个有序子数组，最终将临时数组的值赋给原数组，时间复杂度 $\Theta(N\mathrm{log}N)$。



```cpp
void merge_sort(int l, int r) {
    if (l >= r) return;
    int mid = l + r >> 1;
    merge_sort(l, mid);
    merge_sort(mid + 1, r);

    int i = l, j = mid + 1, cnt = 0;
    while (i <= mid && j <= r) {
        if (a[i] <= a[j]) tmp[cnt ++ ] = a[i ++ ];
        else tmp[cnt ++ ] = a[j ++ ];
    }
    while (i <= mid) tmp[cnt ++ ] = a[i ++ ];
    while (j <= r) tmp[cnt ++ ] = a[j ++ ];

    for (int k = l; k <= r; k ++ ) a[k] = tmp[k - l];
}
```



归并排序出了排序，还常常用来求解逆序对问题，逆序对指 `i < j` 但 `a[i] > a[j]` 的一对元素。归并排序可以在合并步骤中自然地统计这些逆序对——只需在右子数组元素较小时，加上左子数组中剩余元素的数量即可。



## 例题

[P1908](https://www.luogu.com.cn/problem/P1908)

[UVA10810](https://www.luogu.com.cn/problem/UVA10810)
