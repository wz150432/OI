# STL（标准模板库）

STL（标准模板库）的容器是 C++ 高效编程的 “利器”—— 它们封装了常用数据结构的实现，让我们无需重复 “造轮子”，只需根据场景选对 “工具”，就能轻松应对各类数据存储与操作需求。下面为你拆解最核心的 STL 容器，帮你快速匹配「场景 ↔ 容器」。

### 一、vector

- **本质**：基于**连续内存**的动态数组（自动扩容，扩容时可能拷贝旧元素）。
- 核心操作：
  - `push_back(val)` / `pop_back()`：尾部插入 / 删除，均摊时间复杂度 $O(1)$。
  - `[]` 访问：随机访问元素，时间复杂度 $O(1)$。
  - `resize(n)`：调整数组大小（扩容时需拷贝元素，最坏  $O(n)$ ）。
- **适用场景**：读操作多、需要随机访问的场景（如存储序列、结果集、模拟数组）。

### 二、deque

- **本质**：双端队列（**分段连续内存**，兼顾头尾操作效率）。
- 核心操作：
  - `push_back(val)` / `push_front(val)`：头尾插入，时间复杂度 $O(1)$。
  - `[]` 访问：支持随机访问（效率略低于 `vector`）。
- **适用场景**：需频繁在**头尾**操作的场景（如滑动窗口、双端队列模拟）。

### 三、list

- **本质**：双向链表（**非连续内存**，节点间通过指针连接）。
- 核心操作：
  - `push_back(val)` / `push_front(val)`：头尾插入，时间复杂度 $O(1)$。
  - `insert(pos, val)`：任意位置插入（需先定位 `pos`），时间复杂度 $O(1)$。
  - `erase(pos)`：删除指定位置元素，时间复杂度 $O(1)$。
- **优缺点**：插入 / 删除极快，但**不支持随机访问**（需遍历，时间复杂度  $O(n)$ ）。

### 四、stack

- **本质**：栈（基于 `deque` 实现，遵循「后进先出 LIFO」规则）。
- 核心操作：
  - `push(val)`：栈顶插入元素，时间复杂度 $O(1)$。
  - `pop()`：删除栈顶元素（无返回值），时间复杂度 $O(1)$。
  - `top()`：获取栈顶元素（不删除），时间复杂度 $O(1)$。
- **适用场景**：需要 “后进先出” 逻辑的场景（如括号匹配、DFS 非递归实现）。

### 五、priority_queue

- **本质**：优先队列（默认**大顶堆**，基于 `vector` 实现堆结构）。
- 核心操作：
  - `push(val)`：插入元素（需维护堆结构），时间复杂度  $O(logn)$。
  - `pop()`：删除顶部元素（优先级最高的元素），时间复杂度  $O(logn)$。
  - `top()`：获取顶部元素，时间复杂度 $O(1)$。
- **特性**：可通过模板参数指定比较规则（如 `priority_queue<int, vector<int>, greater<int>>` 实现**小顶堆**）。

### 六、map

- **本质**：键值对映射（基于**红黑树**，键自动**升序**排列）。
- 核心操作：
  - `insert(pair)`：插入键值对，时间复杂度  $O(logn)$。
  - `erase(key)`：删除指定键，时间复杂度  $O(logn)$。
  - `find(key)`：查找键（存在则返回迭代器），时间复杂度  $O(logn)$。
  - `[]` 访问：通过键存取值（键不存在时插入默认值），时间复杂度  $O(logn)$。
- **适用场景**：需要**按键有序存储**的场景（如字典、有序统计）。

### 七、unordered_map

- **本质**：哈希表实现的键值对映射（键**无序**）。
- 核心操作：
  - `insert(pair)`：插入键值对（**平均** $O(1)$，哈希冲突时最坏  $O(n)$）。
  - `erase(key)`：删除指定键（**平均** $O(1)$，哈希冲突时最坏  $O(n)$）。
  - `find(key)`：查找键（**平均** $O(1)$，哈希冲突时最坏  $O(n)$）。
  - `[]` 访问：同 `map`（**平均** $O(1)$，哈希冲突时最坏  $O(n)$）。
- **优缺点**：**平均效率高于 `map`**，但键无序、内存消耗略大；哈希冲突严重时性能会下降。

### 八、bitset

- **本质**：固定大小的**位集合**（编译期确定位数）。
- 核心操作：
  - `set(pos)`：设置第 `pos` 位为 $1$，时间复杂度 $O(1)$。
  - `reset(pos)`：设置第 `pos` 位为 $0$，时间复杂度 $O(1)$。
  - `flip(pos)`：翻转第 `pos` 位，时间复杂度 $O(1)$。
  - `test(pos)`：判断第 `pos` 位是否为 $1$，时间复杂度 $O(1)$。
  - `count()`：统计 $1$ 的个数，时间复杂度 $o(\frac{n}{64})$（$n$ 为总位数）。
- **优点**：空间效率极高（$1$ 字节存 $8$ 位），适合**位运算场景**（如状态压缩、位图标记）。